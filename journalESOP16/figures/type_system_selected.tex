% !TEX root = ../journal16kpy.tex
\begin{figure}[t]
\[
	\begin{array}{c}
		\inferrule[(Prom)]{
			\Gamma; \emptyset; \emptyset \proves V \hastype 
                         \lhot{C}
		}{
			\Gamma; \emptyset; \emptyset \proves V \hastype 
                         \shot{C}
		} 
		\quad
		\inferrule[(EProm)]{
		\Gamma; \Lambda \cat x : \lhot{C}; \Delta \proves P \hastype \Proc
		}{
			\Gamma \cat x:\shot{C}; \Lambda; \Delta \proves P \hastype \Proc
		}
		\quad
		\inferrule[(Abs)]{
			\Gamma; \Lambda; \Delta_1 \proves P \hastype \Proc
			\quad
			\Gamma; \es; \Delta_2 \proves x \hastype C
		}{
			\Gamma\backslash x; \Lambda; \Delta_1 \backslash \Delta_2 \proves \abs{{x}}{P} \hastype \lhot{{C}}
		}
		\\[1mm] \\
		\inferrule[(App)]{
			\begin{array}{c}
				U = \lhot{C} \lor \shot{C}
				\\
				\Gamma; \Lambda; \Delta_1 \proves V \hastype U \quad
				\Gamma; \es; \Delta_2 \proves u \hastype C
			\end{array}
		}{
			\Gamma; \Lambda; \Delta_1 \cat \Delta_2 \proves \appl{V}{u} \hastype \Proc
		} 
		~~
		\inferrule[(Send)]{
					\begin{array}{c}
					u:S \in \Delta_1 \cat \Delta_2 \\
			\Gamma; \Lambda_1; \Delta_1 \proves P \hastype \Proc
			\quad
			\Gamma; \Lambda_2; \Delta_2 \proves V \hastype U
			\end{array}
		}{
			\Gamma; \Lambda_1 \cat \Lambda_2; ((\Delta_1 \cat \Delta_2) \setminus u:S) \cat u:\btout{U} S \proves \bout{u}{V} P \hastype \Proc
		}
		\\[2mm] \\
		\inferrule*[left=(Rcv)]{
		\begin{array}{c}
			\Gamma; \Lambda_1; \Delta_1 \cat u: S \proves P \hastype \Proc
			\quad
			\Gamma; \Lambda_2; \Delta_2 \proves {x} \hastype {U}
			\end{array}
		}{
			\Gamma \backslash x; \Lambda_1\cat \Lambda_2; \Delta_1\backslash \Delta_2 \cat u: \btinp{U} S \vdash \binp{u}{{x}} P \hastype \Proc
		}
		\\[2mm] \\
		\inferrule[(Req)]{
			\begin{array}{c}
				\Gamma; \es; \es \proves u \hastype U_1
				\quad
				\Gamma; \Lambda; \Delta_1 \proves P \hastype \Proc
				\\
				\Gamma; \es; \Delta_2 \proves V \hastype U_2
				\\
				(U_1 = \chtype{S} 
                                \land %\Leftrightarrow 
                                U_2 = S)
				\lor
				 (U_1 = \chtype{L} 
                                \land %\Leftrightarrow 
                                %\Leftrightarrow 
                                 U_2 = L)
			\end{array}
		}{
			\Gamma; \Lambda; \Delta_1 \cat \Delta_2 \proves \bout{u}{V} P \hastype \Proc
		}
		~~
		\inferrule[(Acc)]{
			\begin{array}{c}
				\Gamma; \emptyset; \emptyset \proves u \hastype U_1 
				\quad
				\Gamma; \Lambda_1; \Delta_1 \proves P \hastype \Proc
				\\
				\Gamma; \Lambda_2; \Delta_2 \proves x \hastype U_2\\
				(U_1 = \chtype{S} 
                                \land %\Leftrightarrow 
                                U_2 = S)
				\lor
				 (U_1 = \chtype{L} 
                                \land %\Leftrightarrow 
                                %\Leftrightarrow 
                                 U_2 = L)
	               \end{array}
		}{
			\Gamma\backslash x; \Lambda_1 \backslash \Lambda_2; \Delta_1 \backslash \Delta_2 \proves \binp{u}{x} P \hastype \Proc
		}	
		\end{array}
\]
%\vspace{-3mm}
\caption{Selected Typing Rules for $\HOp$.
See \appref{app:types} for a full account.
\label{fig:typerulesmys}}
%\Hline
%\vspace{-1mm}
\end{figure}
%\myparagraph{Typing System of \HOp}



