% !TEX root = main.tex
\noi This section studies %two extensions of \HOp: 
(i)~the encoding of \HOpp into \HOp
%with higher-order applications/abstractions 
%and 
(ii)~the encoding of \PHOp
,i.e.~ polyadic \HOp, into \HOp.
We also show that using encoding composition we can encode
\PHOpp into \HO and \sessp.
%with polyadicity.
%In both cases, we detail required modifications in the syntax
%and types, and
%describe further encodability results.
%These extensions are denoted \HOpp and \PHOp, respectively. 
 
\subsection{Encoding  $\HOpp$ into $\HOp$}
\label{subsec:hop}
\noi 
The calculus \HOpp 
extends \HOp with higher-order abstractions and applications.

%\myparagraph{Syntax, Operational Semantics and Types.}
%\noi First, the syntax of \figref{fig:syntax} extends 
%$\appl{V}{u}$ to 
% $\appl{V}{W}$, including higher-order value $W$. 
%The rule $\appl{(\abs{x}{P})}{V} \red P \subst{V}{x}$
%replaces
%rule $\orule{App}$ in \figref{fig:reduction}.
%The syntax of types is modified as follows: %changes to include: 
%\begin{center}
%\begin{tabular}{c}
%$L \bnfis \shot{U} \bnfbar \lhot{U}$
%\end{tabular}
%\end{center}
%These types can be easily accommodated in the type system:
% in \figref{fig:typerulesmy}, 
%we replace $C$ by $U$ in \trule{Abs} and $C$ by $U'$ in \trule{App}.
%\smallskip 
%
%\myparagraph{Behavioural Semantics.}
%Labels remain the same. Rule $\ltsrule{App}$ in the untyped LTS
%(\figref{fig:untyped_LTS}) 
%is replaced with rule $\appl{(\abs{x}{P})}{V} \by{\tau} P \subst{V}{x}$.
%\defref{def:char} (characteristic processes) is extended with  
%${\mapchar{\shot{U}}{x}} \defeq\! \mapchar{\lhot{U}}{x} \defeq\! {\appl{x}{\omapchar{U}}}$ and 
%${\omapchar{\shot{U}}} \defeq {\omapchar{\lhot{U}}} \!\!\defeq\!\! \abs{x}{\mapchar{U}{x}}$. 
%We can then use the same definitions for $\cong$, $\wbc$, $\hwb$ and $\fwb$. 
%\smallskip 

\myparagraph{Encoding \HOpp into \HOp.} 
Let
	$\tyl{L}_{\HOpp}=\calc{\HOpp}{{\cal{T}}_4}{\hby{\ell}}{\wb_H}{\proves}$
where 
	${\cal{T}}_4$ is a set of types of $\HOpp$;  
the typing $\proves$ is defined in 
\figref{fig:typerulesmy} with extended rules \trule{Abs} and \trule{App}. 
We define 
the typed encoding
$\enco{\map{\cdot}^{3}, \mapt{\cdot}^{3}}: \HOpp \to \HOp$
in \figref{f:enc:hopip_to_hopi}.
By \propref{pro:composition}, 
we derive the following theorem. 

%\smallskip 

\begin{theorem}[Encoding \HOpp into~\HOp]
	\label{f:enc:hopiptohopi}
	The encoding from $\tyl{L}_{\HOpp}$ into $\tyl{L}_{\HOp}$ (cf. \figref{f:enc:hopip_to_hopi})
	is precise. Hence, the encodings 
	from $\tyl{L}_{\HOpp}$ to $\tyl{L}_{\HO}$ 
	and $\tyl{L}_{\sessp}$ 
	are also precise. 
\end{theorem}
%\smallskip 
\input{figures/HOpp_to_HOp}

\subsection{Encoding Polyadic $\HOp$ into $\HOp$}
\label{subsec:pho}
%\noi Embeddings of polyadic name passing into monadic name passing are
%well-studied. % in the literature. 
%Using a linear typing, precise
%encodings (including full abstraction) can be obtained~\cite{Yoshida96}.
Here we summarise how $\PHOp$ can be encoded into $\HOp$. 
%The syntax of 
%$\HOp$ is extended %from \HOp by including 
%with
%polyadic name passing $\tilde{n}$ and $\abs{\tilde{x}}{Q}$ in the syntax 
%of value $V$. The type syntax is extended to: 
%
%\begin{center}
%\begin{tabular}{c}
%$
%L ::= \shot{\tilde{C}} \ | \ \lhot{\tilde{C}}
%\quad\quad S \ ::= \  \btout{\tilde{U}} S \bnfbar \btinp{\tilde{U}} S \bnfbar \cdots 
%$
%\end{tabular}
%\end{center}
%%
%The type system disallows a shared name that directly carries polyadic
%shared names as in \cite{tlca07,MostrousY15}.
%i.e. $\chtype{\tilde{\chtype{S}}}$ 
%and $\chtype{\tilde{\chtype{L}}}$ 
%are disallowed.
%Other definitions are straightforwardly extended. 
%\jpc{We slightly modify \defref{def:tenc} to capture that a 
%label $\ell$ may be mapped into a sequence of labels~$\tilde{\ell}$.}
%We extend the mapping for labels 
%($\mapa{\cdot}: \ell \to \tilde{\ell}$ in  
%\defref{def:tenc}) to capture 
%a sequence of labels  and 
%Also, \defref{def:ep} is kept unchanged, 
%assuming that if 
%$P \hby{\ell} P'$ and $\mapa{\ell} = \ell_1, \ell_2,  \cdots, \ell_m$ then
%$\map{P} \Hby{\mapa{\ell}} \map{P'}$
%should be understood as
%$\map{P} \Hby{\ell_1} P_1 \Hby{\ell_2} P_2 \cdots \Hby{\ell_m} P_m =  \map{P'}$,
%for some
%$P_1, P_2, \ldots, P_m$.

Let
	$\tyl{L}_{\PHOp}=\calc{\PHOp}{{\cal{T}}_5}{\hby{\ell}}{\wb_H}{\proves}$
where 
	${\cal{T}}_5$ is a set of types of $\HOpp$;  
the typing $\proves$ is defined in
\figref{fig:typerulesmy} with polyadic types. 
We define the typed encoding
	$\enco{\map{\cdot}^{4}, \mapt{\cdot}^{4}}: \PHOp \to \HOp$ 
in \figref{f:enc:poltomon}.
We give the dyadic case (tuples of length 2), for simplicity;
the general case is as expected.
Then we have:

\begin{theorem}[Encoding of \pHOp into \HOp]
	\label{f:enc:phopiptohopi}
	The encoding from
		$\tyl{L}_{\PHOp}$ into $\tyl{L}_{\HOp}$ (cf. \figref{f:enc:poltomon})
	is precise. 
	Hence, the encodings 
	from
	$\tyl{L}_{\PHOp}$ to $\tyl{L}_{\HO}$ 
	and $\tyl{L}_{\sessp}$ 
	are also precise. 
\end{theorem}

By combining Thms.~\ref{f:enc:hopiptohopi} and~\ref{f:enc:phopiptohopi},
we can easily extend the preciseness to 
$\PHOpp$, the super-calculus of $\HOpp$ and $\PHOp$.
% (denoted by   in Fig.~\ref{fig:express}) 


\input{figures/polHOp_to_HOp}
