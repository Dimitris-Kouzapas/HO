\begin{figure}[t]
{\bf Types:}

$
	\begin{array}{c}
		\tmap{\btout{\lhot{S}}S_1}{2} \defeq \bbtout{\chtype{\btinp{\tmap{S}{2}}\tinact}}\tmap{S_1}{2}
		\qquad
		\quad
		\tmap{\btinp{\lhot{S}}S_1}{2} \defeq \bbtinp{\chtype{\btinp{\tmap{S}{2}}\tinact}}\tmap{S_1}{2}
%\noindent{\bf Labels:}\ 
%		\mapa{(\nu \tilde{m})\bactout{n}{\abs{ x}{P}} }^2  & \defeq & \news{m} \bactout{n}{m} \\
%		\mapa{\bactinp{n}{\abs{ x}{P}} }^2 &  \defeq & \bactinp{n}{m}
%\quad \quad m \text{ fresh}
%\\[1mm]
%\hline
	\end{array}
$
\\[2mm]
{\bf Terms} :
\\
$
\begin{array}{rcll}
	\pmap{\bout{u}{\abs{x}{Q}} P}{2} & \defeq  &
	\left\{
	\begin{array}{r}
		\newsp{a}{\bout{u}{a} (\pmap{P}{2} \Par \repl{} \binp{a}{y} \binp{y}{x} \pmap{Q}{2})\,}\quad
		(s \notin \fn{Q})
		\\
		\newsp{a}{\bout{u}{a} (\pmap{P}{2} \Par \binp{a}{y} \binp{y}{x} \pmap{Q}{2})\,}\quad
		\textrm{(otherwise)} %\dk{Q \textrm{ linear}} \\
	\end{array}
	\right.
	\\[1mm]

	\pmap{\binp{u}{x} P}{2} &\defeq&  \binp{u}{x} \pmap{P}{2}
	%\quad \quad \pmap{\appl{(\abs{x}{P})}{u}}{2} \!\! \defeq \!\! \pmap{P\subst{u}{x}}{2}
	\qquad
	\pmap{\appl{x}{u}}{2} \defeq \newsp{s}{\bout{x}{s} \bout{\dual{s}}{u} \inact}
	\\[1mm]

	\pmap{\appl{(\abs{x}{P})}{u}}{2} & \defeq & %\newsp{s}{\bout{a}{s} \bout{\dual{s}}{u} \inact} \\
	\newsp{s}{\binp{s}{x} \pmap{P}{2} \Par \bout{\dual{s}}{u} \inact}
\end{array}
$
\\[2mm]
{Notice: $\repl{} P$ means $\recp{X}{(P \Par \rvar{X})}$. Elided mappings are homomorphic.}
%for others.  %types, labels and processes    
%\vspace{-1mm}
\caption{Encoding of \HOp into \sessp (\defref{d:enc:hopitopi}). \label{f:enc:ho_to_sessp}}
%\vspace{-1mm}
%\Hlinefig
\end{figure}

