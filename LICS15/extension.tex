This section studies two extensions of \HOp, 
the functional abstraction (\HOpp)
and polyadic (\PHOp) calculi.  
 
\subsection{Encoding from $\HOpp$ to $\HOp$}
\label{subsec:hop}
\noi The functional abstraction \HOp-calculus, denoted by \HOpp, 
extends \HOp to %the $n$-higher-order 
functional abstractions and applications.

\myparagraph{Syntax, Operational Semantics and Types}
\noi First, the syntax of \figref{fig:syntax} extends 
$\appl{V}{u}$ to 
 $\appl{V}{W}$, including higher-order value $W$. 
We then replace rule $\orule{App}$ in \figref{fig:reduction}
with rule $\appl{(\abs{x}{P})}{V} \red P \subst{V}{x}$.
The syntax of types changes to include: 
\[ L \bnfis \shot{U} \bnfbar \lhot{U}\]  
We apply the straightforward extension of the typing  
system to accomodate the extended type syntax 
(we replace $C$ by $U$ in \trule{Abs} and $C$ by $U'$ in \trule{App} in \figref{fig:typerulesmy}).
\smallskip 

\myparagraph{Behavioural Semantics}
Labels remain the same. Rule $\ltsrule{App}$ in the untyped LTS
(\figref{fig:untyped_LTS}) 
is replaced with rule $\appl{(\abs{x}{P})}{V} \by{\tau} P \subst{V}{x}$.
Characteristic processes (\defref{def:char}) are extended with  
${\mapchar{\shot{U}}{x}} \!\!\defeq\!\! \mapchar{\lhot{U}}{x} \!\!\defeq\!\! {\appl{x}{\omapchar{U}}}$ and ${\omapchar{\shot{U}}} \defeq {\omapchar{\lhot{U}}} \!\!\defeq\!\! \abs{x}{\mapchar{U}{x}}$. 
Then we can use the same definitions for $\cong$, $\wbc$, $\hwb$ and $\fwb$. 

\smallskip 

\myparagraph{Encoding from \HOpp to \HOp} 
Let $\tyl{L}_{\HOpp}=\calc{\HOpp}{{\cal{T}}_4}{\hby{\ell}}{\wb_H}{\proves}$
where 
${\cal{T}}_4$ is a set of types of $\HOpp$;  
the typing $\proves$ is defined in 
\figref{fig:typerulesmy} with extended \trule{Abs} and \trule{App}. 
We define the typed encoding 
the typed encoding $\enco{\map{\cdot}^{3}, \mapt{\cdot}^{3}, \mapa{\cdot}^{3}}: \HOpp \to \HOp$ in 
\figref{f:enc:hopip_to_hopi}.
By \propref{pro:composition}, 
we derive the following theorem. 

\smallskip 

\begin{theorem}[Encoding of Functional Abstraction Higher-Order Pi into Pi]
\label{f:enc:hopiptohopi}
The encoding from $\tyl{L}_{\HOpp}$ into $\tyl{L}_{\HOp}$ 
is precise. Hence the encodings 
from $\tyl{L}_{\HOpp}$ to $\tyl{L}_{\HO}$ 
and $\tyl{L}_{\sessp}$ 
are also precise. 
\end{theorem}

\begin{figure}[t]
\[
\begin{array}{lrcll}
\noindent{\bf Types:} & 
		\tmap{\shot{L}}{3} &\defeq& \shot{\btinp{\tmap{L}{3}} \tinact}
		\\
%&		\tmap{\lhot{L}}{3} &\defeq& \lhot{\btinp{\tmap{L}{3}} \tinact}
%		\\
&		\tmap{\btout{\shot{L}} S}{3} &\defeq& \btout{\tmap{\shot{L}}{3}} \tmap{S}{3}
		\\
%&		\tmap{\btout{\lhot{L}} S}{3} &\defeq& \btout{\tmap{\lhot{L}}{3}} \tmap{S}{3}
%		\\
&		\tmap{\btinp{\shot{L}} S}{3} &\defeq& \btinp{\tmap{\shot{L}}{3}} \tmap{S}{3}
%		\\
%&		\tmap{\btinp{\lhot{L}} S}{3} &\defeq& \btinp{\tmap{\lhot{L}}{3}} \tmap{S}{3}
\\[1mm]
\hline
\noindent{\bf Labels:} & 
%		\mapa{\bactout{n}{\abs{x:C}{P}}}^{3} &\defeq& \bactout{n}{\abs{x}{\pmap{P}{3}}}
%		\\
%		\mapa{\bactinp{n}{\abs{x:C}{P}}}^{3} &\defeq& \bactinp{n}{\abs{x}{\pmap{P}{3}}}
%		\\
		\mapa{\bactout{n}{\abs{\AT{x}{L}}{P}}}^{3} &\defeq& \bactout{n}{\abs{z}{\binp{z}{x} \pmap{P}{3}}}
		\\
&		\mapa{\bactinp{n}{\abs{\AT{x}{L}}{P}}}^{3} &\defeq& \bactinp{n}{\abs{z}{\binp{z}{x} \pmap{P}{3}}}
\\[1mm]
\hline
{\bf Terms}: & 
	\pmap{\appl{x}{(\abs{x} P)}}{3} &\defeq& \newsp{s}{\appl{x}{s} \Par \bout{\dual{s}}{\abs{x} \pmap{P}{3}} \inact}
		\\
&	\pmap{\bout{u}{\abs{\AT{x}{L}}{Q}} P}{3} &\defeq& \bout{u}{\abs{z}{\binp{z}{x} \pmap{Q}{3}}} \pmap{P}{3}
%		\pmap{\bout{u}{\abs{x: C}{Q}} P}{3} &\defeq& \bout{u}{\abs{x}{\pmap{Q}{3}}} \pmap{P}{3}
	\end{array}
	\]
The mapping of types for $\lhot{L}$ is defined by replacing 
$\shot{L}$ by $\lhot{L}$. 
The case of $\abs{x:C}{P}$ in the label and term mappings 
are %defined 
as in \figref{f:enc:hopi_to_ho}, replacing 
$\tmap{\cdot}{1}$,
$\mapa{\cdot}^{1}$, and 
$\pmap{\cdot}{1}_f$, by  
$\tmap{\cdot}{3}$,
$\mapa{\cdot}^{3}$, and 
$\pmap{\cdot}{3}$. 
The other processes, types and labels are  homomorphic. 
\caption{\label{f:enc:hopip_to_hopi} 
Encoding of \HOpp into \HOp.
}
\Hline
\end{figure} 

\subsection{Encoding from Polyadic $\HOp$ to $\HOp$}
\label{subsec:pho}
\noi Embedding the polyadic name passing 
into the monadic name passing is well-studied in the literature.    
Using the linear typing, 
the preciseness (full abstraction) can be obtained \cite{Yoshida96}.
Here we summarise $\PHOp$ can be encoded into $\HOp$. 
The syntax of 
$\HOp$ is extended from \HOp by including 
polyadic name passing $\tilde{n}$ and $\abs{\tilde{x}}{Q}$ in the syntax 
of value $V$. The type syntax is extended to: 
%
\[
L ::= \shot{\tilde{C}} \ | \ \lhot{\tilde{C}}
\quad\quad S \ ::= \  \btout{\tilde{U}} S \bnfbar \btinp{\tilde{U}} S \bnfbar \cdots 
\]
%
\dk{The type system dissallows polyadic shared names.}
Other definitions are straightforwardly extended. 
We extend the mapping for labels 
($\mapa{\cdot}: \ell \to \tilde{\ell}$ in  
\defref{def:tenc}) to capture 
a sequence of labels  and \defref{def:ep} stays as the same
assuming that if 
$P \hby{\ell} P'$ and $\mapa{\ell} = \{\ell_1, \ell_2,  \cdots, \ell_m\}$ then
$\map{P} \Hby{\mapa{\ell}} \map{P'}$
should be understood as
$\map{P} \Hby{\ell_1} P_1 \Hby{\ell_2} P_2 \cdots \Hby{\ell_m} P_m =  \map{P'}$,
for some
$P_1, P_2, \ldots, P_m$.

Let $\tyl{L}_{\PHOp}=\calc{\PHOp}{{\cal{T}}_5}{\hby{\ell}}{\wb_H}{\proves}$
where 
${\cal{T}}_5$ is a set of types of $\HOpp$;  
the typing $\proves$ is defined in 
\figref{fig:typerulesmy} with polyadic types. 
We define the typed encoding 
the typed encoding $\enco{\map{\cdot}^{4}, \mapt{\cdot}^{4}, \mapa{\cdot}^{4}}: \PHOp \to \HOp$ 
in \figref{f:enc:poltomon}. 
Then we have:

\smallskip 

\begin{theorem}[Encoding of Polyadic Higher-Order Pi into Higher-Order Pi]
\label{f:enc:hopiptohopi}
The encoding from $\tyl{L}_{\PHOp}$ into $\tyl{L}_{\HOp}$ 
is precise. Hence the encodings 
from $\tyl{L}_{\PHOp}$ to 
$\tyl{L}_{\HO}$ 
and $\tyl{L}_{\sessp}$ 
are also precise. 
\end{theorem}

\begin{figure}[t]
\small
\[
\begin{array}{rcl}
% typed mapping starts here
{\bf Types:}\hspace{2.5cm}\\
		\tmap{\btout{S_1, \cdots, S_m}S}{4}
		&\!\!\defeq\!\!&
		\btout{\tmap{S_1}{4}} \cdots ; \btout{\tmap{S_m}{4}}\tmap{S}{4}
%		\\
%		\tmap{\btinp{S_1, \cdots, S_m}S}{4}
%		&\defeq&
%		\btinp{\tmap{S_1}{4}} \cdots ; \btinp{\tmap{S_m}{4}}\tmap{S}{4}
		\\
		\tmap{\bbtout{L} S}{4}
		&\!\!\defeq\!\!&
		\bbtout{\mapt{L}^{4}}\mapt{S}^{4}
%		\\
%		\tmap{\bbtinp{L} S}{4}
%		&\defeq&
%		\bbtinp{\mapt{L}^{4}}\mapt{S}^{4}
		\\
%		\tmap{\bbtout{\shot{(C_1, \cdots, C_m)}} S}{4}
%		&\defeq&
%		\bbtout{
%		\shot{\big(\btinp{\tmap{C_1}{4}} \cdots; \btinp{\tmap{C_m}{4}}\tinact\big)}}\mapt{S}^{4}
%		\\
%		\tmap{\bbtinp{\shot{(C_1, \cdots, C_m)}} S}{4}
%		&\defeq&
%		\bbtinp{
%		\shot{\big(\btinp{\tmap{C_1}{4}} \cdots; \btinp{\tmap{C_m}{4}}\tinact\big)}}\mapt{S}^{4}
%		\\
		\tmap{\shot{(C_1, \cdots, C_m)}}{4}
		&\!\!\defeq\!\!&
		\shot{\big(\btinp{\tmap{C_1}{4}} \cdots; \btinp{\tmap{C_m}{4}}\tinact\big)}
		\\
		\tmap{\lhot{(C_1, \cdots, C_m)}}{4}
		&\!\!\defeq\!\!&
		\lhot{\big(\btinp{\tmap{C_1}{4}} \cdots; \btinp{\tmap{C_m}{4}}\tinact\big)}
		\\
%		\tmap{\lhot{(C_1, \cdots, C_m)}}{4}
%		&\defeq&
%		\lhot{\big(\btinp{\tmap{C_1}{\mathsf{p}}} \cdots \btinp{\tmap{C_m}{\mathsf{p}}}\tinact\big)}
%		\\
%		\tmap{\shot{(C_1, \cdots, C_m)}}{\mathsf{p}}
%		&\defeq&
%		\shot{\big(\btinp{\tmap{C_1}{\mathsf{p}}} \cdots \btinp{\tmap{C_m}{\mathsf{p}}}\tinact\big)}
\hline
{\bf Labels:}\hspace{2.5cm}\\
%		\\ % action mapping starts here
		\mapa{\bactout{u}{u_1, \ldots, u_m}}^4 
		&\!\!\!\!\defeq\!\!\!\!&
 \bactout{u}{u_1} \cdots \bactout{u}{u_m} \\
%		\mapa{\bactinp{k}{k_1, \ldots, k_m}}^4 &\defeq&   \big\{\bactinp{k}{k_1}, \cdots, \bactinp{k}{k_m} \big\}\\
		\mapa{\bactout{u}{\abs{x_1, \ldots, x_m}{P}} }^4 
		&\!\!\defeq\!\!&
\bactout{u}{\abs{z}\binp{z}{x_1} \cdots \binp{z}{x_m} \map{P}^{4}}\\
%		\mapa{\bactinp{k}{\abs{x_1, \ldots, x_m}{P}} }^4 &\defeq&  \bactinp{k}{\abs{z}\binp{z}{x_1} \cdots ; \binp{z}{x_m} \map{P}^{4}} 
\hline
{\bf Terms:}\hspace{2.5cm}\\
		\map{\bout{u}{u_1, \cdots, u_m} P}^{4}
		&\!\!\defeq\!\!&
		\bout{u}{u_1} \cdots ;  \bout{u}{u_m} \map{P}^{4}
		\\
%			\map{\binp{k}{x_1, \cdots, x_m} P}^{4}
%		&\defeq&
%		\binp{k}{x_1} \cdots ; \binp{k}{x_m}  \map{P}^{4}
%		\\
		\map{\bbout{u}{\abs{(x_1, \cdots, x_m)} Q} P}^{4}
		&\!\!\defeq\!\!&
		\bbout{u}{\abs{z}\binp{z}{x_1}\cdots ; \binp{z}{x_m} \map{Q}^{4}} \map{P}^{4}
		\\ 
		\map{\appl{x}{(u_1, \cdots, u_m)}}^{4}
		&\!\!\defeq\!\!&
		\newsp{s}{\appl{x}{s} \Par \bout{\dual{s}}{u_1} \cdots ; \bout{\dual{s}}{u_m} \inact} 
        \\ 
	\end{array}
\]
The input cases are defined as the outputs replacing $!$ by $?$. 
The mappings for the other processes/types/labels are 
homomorphic. 
\caption{\label{f:enc:poltomon}
Encoding of \PHOp to \HOp.
}
\Hline 
\end{figure}

