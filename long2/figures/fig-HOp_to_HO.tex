\begin{figure}[h!]
\[
	\begin{array}{rclcrcl}
		\multicolumn{7}{l}{\textrm{\bf Terms}}
		\\
		\pmapp{\bout{u}{v} P}{1}{f}	&\defeq&	\bout{u}{ \abs{z}{\,\binp{z}{x} \appl{x}{v}} } \pmapp{P}{1}{f}
		& &
		\pmapp{\binp{u}{k} Q}{1}{f}	&\defeq&	\binp{u}{x} \newsp{s}{\appl{x}{s} \Par \bout{\dual{s}}{\abs{x}{\pmapp{Q}{1}{f}}} \inact}
		\\
		\pmapp{\bout{u}{\abs{x}{Q}} P}{1}{f} &\defeq& \bout{u}{\abs{x}{\pmapp{Q}{1}{f}}} \pmapp{P}{1}{f}
		& &
		\pmapp{\binp{u}{\underline{x}} P}{1}{f}	&\defeq&	\binp{u}{\underline{x}} \pmapp{P}{1}{f}
		\\
		\pmapp{\recp{X}{P}}{1}{f} &\defeq&
		\multicolumn{5}{l}{
			\newsp{s}{\binp{s}{x} \pmapp{P}{1}{{f,\{\varp{X}\to \tilde{n}\}}} \Par
			\bout{\dual{s}}{\abs{\vmap{\tilde{n}}, z } \,{\binp{z}{x} \auxmap{\pmapp{P}{1}{{f,\{\varp{X}\to \tilde{n}\}}}}{\es}}} \inact}
			\quad \tilde{n} = \ofn{P}
		}
		\\
		\pmapp{\varp{X}}{1}{f} &\defeq&
		\multicolumn{5}{l}{
			\newsp{s}{\appl{x}{\tilde{n}, s} \Par \bbout{\dual{s}}{ \abs{\vmap{\tilde{n}},z}\,\,{\appl{x}{ \vmap{\tilde{n}}, z}}} \inact}
			\qquad \qquad \qquad \qquad \qquad \quad \tilde{n} = f(\varp{X})
		}
		\\
		\pmapp{\bsel{s}{l} P}{1}{f}	&\defeq&	\bsel{s}{l} \pmapp{P}{1}{f}
		& & 
		\pmapp{\bbra{s}{l_i: P_i}_{i \in I}}{1}{f} &\defeq& \bbra{s}{l_i: \pmapp{P_i}{1}{f}}_{i \in I}
		\\
		\pmapp{\appl{x}{u}}{1}{f}	&\defeq&	\appl{x}{u}
		& &
		\pmapp{P \Par Q}{1}{f}		&\defeq&	\pmapp{P}{1}{f} \Par \pmapp{Q}{1}{f}
		\\
		\pmapp{\news{n} P}{1}{f}	&\defeq&	\news{n} \pmapp{P}{1}{f}
		& &
		\pmapp{\inact}{1}{f}		&\defeq&	\inact
		\\
		\multicolumn{7}{l}{\textrm{\bf Types}}
		\\
		\tmap{C}{1}_\mathsf{v}		&\defeq&
		\multicolumn{5}{l}{
			\left\{
			\begin{array}{rcl}
				\lhot{(\btinp{\lhot{\tmap{C}{1}}} \tinact)} && \textrm{if } C = S\\
				\lhot{(\btinp{\shot{\tmap{C}{1}}} \tinact)} && \textrm{otherwise}\\
			\end{array}
			\right.
		}
		\\
		\tmap{\lhot{C}}{1}_\mathsf{v}	&\defeq& \lhot{\tmap{C}{1}}
		& & 
		\tmap{\shot{C}}{1}_\mathsf{v}	&\defeq& \shot{\tmap{C}{1}}
		\\
		\tmap{\chtype{S}}{1}		&\defeq& \chtype{\tmap{S}{1}}
		& &
		\tmap{\chtype{L}}{1}		&\defeq& \chtype{\tmap{L}{1}_\mathsf{v}}
		\\
		\tmap{\btout{U} S}{1}		&\defeq& \btout{\tmap{U}{\mathsf{v}}} \tmap{S}{1}
		& &
		\tmap{\btinp{U} S}{1}		&\defeq& \btinp{\tmap{U}{\mathsf{v}}} \tmap{S}{1}
		\\
		\tmap{\btsel{l_i: S_i}_{i \in I}}{1} &\defeq& \btsel{l_i: \tmap{S_i}{1}}_{i \in I}
		& &
		\tmap{\btbra{l_i: S_i}_{i \in I}}{1} &\defeq& \btbra{l_i: \tmap{S_i}{1}}_{i \in I}
		\\
		\tmap{\vart{t}}{1} &\defeq& \vart{t}
		& &
		\tmap{\trec{t}{S}}{1} &\defeq& \trec{t}{\tmap{S}{1}}
		\\
		\tmap{\tinact}{1} &\defeq& \tinact
		\\
		\multicolumn{7}{l}{\textrm{\bf Labels}}
		\\
		\mapa{\news{\tilde{m_1}}\bactout{n}{m}}^{1}	&\defeq&	\news{\tilde{m_1}}\bactout{n}{\abs{z}{\,\binp{z}{x} \appl{x}{m}} }
		& &
		\mapa{\bactinp{n}{m}}^{1}			&\defeq&	\bactinp{n}{\abs{z}{\,\binp{z}{x} \appl{x}{m}} }
		\\
		\mapa{\news{\tilde{m}}\bactout{n}{\abs{x}{P}}}^{1} &\defeq& \news{\tilde{m}}\bactout{n}{\abs{x}{\pmapp{P}{1}{\es}}}
		& &
		\mapa{\bactinp{n}{\abs{x}{P}}}^{1} &\defeq& \bactinp{n}{\abs{x}{\pmapp{P}{1}{\es}}}
		\\
		\mapa{\bactsel{n}{l} }^{1} &\defeq& \bactsel{n}{l} 
		& &
		\mapa{\bactbra{n}{l} }^{1} &\defeq& \bactbra{n}{l} 
		\\
		\mapa{\tau}^{1} &\defeq& \tau

	\end{array}
\]
	\caption{
		\label{fig:enc:HOp_to_HO}
		Typed encoding of \HOp into \HO (cf.~Defintion~\ref{def:enc:HOp_to_HO}).
%		Mappings 
%		$\map{\cdot}^2$,
%		$\mapt{\cdot}^2$, 
%		and 
%		$\mapa{\cdot}^2$
%		are homomorphisms for the other processes/types/labels. 
	}
\end{figure}

