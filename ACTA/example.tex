% !TEX root = main.tex
%\section{Example}

%\noi 
%Following up the claim made in \S\,\ref{sec:relwork}, 
%we contrast our approach with that in~\cite{JeffreyR05} in a concrete, representative example.
\begin{example}\label{exam:jr}
	Consider process
	$$\Gamma; \es; \Delta \cat n: \btout{U} \tinact \proves \bout{n}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact \hastype \Proc$$
	with $U = \shot{(\shot{(\shot{(\btout{S} \tinact)})})}$. 
	We describe the transitions required to check the bisimilarity
	of this process with itself. 
	In our framework, first we have a typed transition
	$$
	\Gamma; \es; \Delta \cat n: \btout{U} \tinact \proves \bout{n}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact \by{\bactout{n}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}}}\Gamma; \es; \Delta \proves \inact
	$$
	In the framework of~\cite{JeffreyR05} a similar (but untyped) output transition takes place.
    In \figref{f:comparison} we compare the closures obtained by the definition of bisimilarity in our approach (\figref{tablejr:1}) and in~\cite{JeffreyR05} (\figref{tablejr:2}).
    In our approach, we let 
    \begin{eqnarray*}
    V & = & \abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)} \\
	\mapchar{\btinp{U} \inact}{s} & = & \binp{s}{x} \appl{x}{(\abs{y}{(\appl{y}{a}))}}\qquad \textrm{for some fresh $a$}
	\end{eqnarray*}
	Then we have one visible input transition (line (1)), followed by four deterministic internal transitions; no replicated processes are needed.
	The approach of~\cite{JeffreyR05} also uses five 
	 transitions, but more visible transitions are required
	(three, see lines (1), (2), and (3) in \figref{tablejr:2}) and at the end, two replicated processes remain.
	This is how linearity information in session types allows us to have more economical closures.
	Note that $\tau_l$ and $\tau_k$ in lines (1) and (3) denote triggered processes on names $l$ and $k$.
	
	
%This simple example shows how both approaches feature the same number of (typed) transitions.
%It is interesting to see how our approach based on refined LTS and characteristic bisimilarity requires less observable actions than that in~\cite{JeffreyR05}.
%Also, as we are able to distinguish between linear and shared names, we require less replicated processes than in~\cite{JeffreyR05}.
	
	
%
%	\begin{eqnarray*}
%		\mapchar{\btinp{U} \inact}{s}\\
%		= && \binp{s}{x} \mapchar{\shot{(\shot{(\shot{(\btout{S} \tinact)})})}}{x}\\
%		= && \binp{s}{x} \appl{x}{\omapchar{\shot{(\shot{(\btout{S} \tinact)})}}}\\
%		= && \binp{s}{x} \appl{x}{(\abs{y}{\mapchar{\shot{(\btout{S} \tinact)}}{y}})}\\
%		= && \binp{s}{x} \appl{x}{(\abs{y}{\appl{y}{\omapchar{\btout{S} \tinact}})}}\\
%		= && \binp{s}{x} \appl{x}{(\abs{y}{\appl{y}{a})}}\\
%	\end{eqnarray*}
%
%	The characteristic process of
%	the type $\shot{(\shot{(\shot{(\btout{S} \tinact)})})}$ is

\begin{figure}
%\begin{tabular}{c}
%\hline 
\begin{subfigure}[t]{\textwidth}
	\begin{tabular}{rcl}
         &    &   $\ftrigger{t}{V}{U}$   
         \\[1mm]
		   &  $=$ & $\Gamma; \es; \Delta \proves \binp{t}{z} \newsp{s}{\mapchar{\btinp{U} \inact}{s} \Par \bout{\dual{s}}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact}$ 
		   \\[1mm]
		&  $=$& $\Gamma; \es; \Delta \proves \binp{t}{z} \newsp{s}{\binp{s}{x} \appl{x}{(\abs{y}{(\appl{y}{a}))}} \Par \bout{\dual{s}}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact}$
		 \\[1mm]
		(1)   &$\by{\bactinp{t}{b}}$& $\Gamma; \es; \Delta \proves \newsp{s}{\binp{s}{x} \appl{x}{(\abs{y}{(\appl{y}{a}))}} \Par \bout{\dual{s}}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact}$\\
		(2)  &$\by{\dtau}$& $\Gamma; \es; \Delta \proves \appl{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m} \inact})}}{(\abs{y}{(\appl{y}{a}))}}$\\
		(3)  &$\by{\dtau}$& $\Gamma; \es; \Delta \proves \appl{(\abs{y}{(\appl{y}{a})})}{(\abs{y}{\bout{y}{m} \inact})} $\\
		(4)   &$\by{\dtau}$& $\Gamma; \es; \Delta \proves \appl{(\abs{y}{\bout{y}{m} \inact})}{a}$\\
		(5)   &$\by{\dtau}$& $\Gamma; \es; \Delta \proves \bout{a}{m} \inact$   %\\ \vspace{4mm}
	\end{tabular} 
	\caption{Our approach.}\label{tablejr:1}
	\end{subfigure}
%	\\ %\vspace{2mm} 

\bigskip

\begin{subfigure}[t]{\textwidth}
		\begin{tabular}{rrl}
		 & & $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) $
		 \\
		(1) &$\by{\bactinp{t}{\tau_l}}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \appl{(\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)})}{\tau_l}$\\
		(2) &$\by{\dtau}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \appl{\tau_l}{(\abs{y}{\bout{y}{m}} \inact)}$\\
		(3) &$\by{\news{k} \bactout{l}{\tau_k}}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \repl{} \binp{k}{y} \bout{y}{m} \inact $\\
		(4) &$\by{\bactinp{k}{a}}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \repl{} \binp{k}{y} \bout{y}{m} \inact \Par \appl{(\abs{y}{\bout{y}{m} \inact})}{a}$\\
		(5) &$\by{\dtau}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \repl{} \binp{k}{y} \bout{y}{m} \inact \Par \bout{a}{m} \inact$
	\end{tabular}
	 %\\ \hline
%	\end{tabular}
\caption{Jeffrey and Rathke's approach~\cite{JeffreyR05}.}\label{tablejr:2}
	\end{subfigure}
\caption{Comparing labeled transitions associated to the process in Example~\ref{exam:jr}.\label{f:comparison} }
\end{figure}

%\noi In our approach, we would have the following typed transitions:
%
%	\begin{tabular}{rrl}
%		(1)& & $\Gamma; \es; \Delta \cat n: \btout{U} \tinact \proves \bout{n}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact$ \\
%		&$\by{\bactout{n}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}}}$& $\Gamma; \es; \Delta \proves \inact$\\
%		(2) & & $\Gamma; \es; \Delta \proves \binp{t}{z} \newsp{s}{\mapchar{\btinp{U} \inact}{s} \Par \bout{\dual{s}}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact}$\\
%		&$=$& $\Gamma; \es; \Delta \proves \binp{t}{z} \newsp{s}{\binp{s}{x} \appl{x}{(\abs{y}{\appl{y}{a})}} \Par \bout{\dual{s}}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact}$\\
%		(3) &$\by{\bactinp{t}{b}}$& $\Gamma; \es; \Delta \proves \newsp{s}{\binp{s}{x} \appl{x}{(\abs{y}{\appl{y}{a})}} \Par \bout{\dual{s}}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact}$\\
%		(4) &$\by{\tau}$& $\Gamma; \es; \Delta \proves \appl{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m} \inact})}}{(\abs{y}{\appl{y}{a})}}$\\
%		(5) &$\by{\tau}$& $\Gamma; \es; \Delta \proves \appl{(\abs{y}{\appl{y}{a}})}{(\abs{y}{\bout{y}{m} \inact})} $\\
%		(6) &$\by{\tau}$& $\Gamma; \es; \Delta \proves \appl{(\abs{y}{\bout{y}{m} \inact})}{a}$\\
%		(7) &$\by{\tau}$& $\Gamma; \es; \Delta \proves \bout{a}{m} \inact$
%	\end{tabular}
%
%\noi In the approach defined in~\cite{JeffreyR05} we would have:
%
%	\begin{tabular}{rrl}
%		(1)& & $\Gamma; \es; \Delta \cat n: \btout{U} \tinact \proves \bout{n}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}} \inact$ \\
%		&$\by{\bactout{n}{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}}}$& $\Gamma; \es; \Delta \proves \inact$\\
%		(2) & & $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) $\\
%		(3) &$\by{\bactinp{t}{\tau_l}}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \appl{\abs{x}{\appl{x}(\abs{y}{\bout{y}{m}} \inact)}}{\tau_l}$\\
%		(4) &$\by{\tau}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \appl{\tau_l}{(\abs{y}{\bout{y}{m}} \inact)}$\\
%		(5) &$\by{\bactout{l}{\tau_k}}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \repl{} \binp{k}{y} \bout{y}{m} \inact $\\
%		(6) &$\by{\bactinp{k}{a}}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \repl{} \binp{k}{y} \bout{y}{m} \inact \Par \appl{\abs{y}{\bout{y}{m} \inact}}{a}$\\
%		(7) &$\by{\tau}$& $\Gamma; \es; \Delta \proves \repl{} \binp{t}{x} \appl{x}(\abs{y}{\bout{y}{m}} \inact) \Par \repl{} \binp{k}{y} \bout{y}{m} \inact \Par \bout{a}{m} \inact$
%	\end{tabular}
	
 

%	Comparing
%	\begin{itemize}
%		\item	Same number of transitions.
%		\item	J \& R more observable actions.
%		\item	J \& R replicated processes.
%	\end{itemize}

\end{example}


