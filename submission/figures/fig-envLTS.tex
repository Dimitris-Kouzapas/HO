\begin{figure}
	\[
	\begin{array}{c}
		\tree{
			\begin{array}{c}
				\dual{s} \notin \dom{\Sigma}
				\qquad 
				\Gamma \cat \Gamma'; \Lambda'; \Sigma_1 \cat \Sigma_2 \proves V \hastype U
				\qquad
				\Lambda' \subseteq \Lambda
				\qquad
				\Sigma_1 \subseteq \Sigma\\
				a \in \tilde{n} \Leftrightarrow a: \chtype{U'} \in \Gamma \wedge
				s \in \tilde{n} \Leftrightarrow (s_i: S_i \in \Sigma_2 \wedge \dual{s_i}: S'_i \in \Sigma_3 \wedge S_i \dualof S'_i)
			\end{array}
		}{
			(\Gamma; \Lambda; \Sigma \cat s: \btout{U} S) \by{\news{\tilde{n}} \bactout{s}{V}} (\Gamma \cat \Gamma'; \Lambda\backslash\Lambda'; (\Sigma\backslash\Sigma_1) \cat \Sigma_3 \cat s: S)			
		}
		\\[6mm]
		\tree{
			\begin{array}{c}
				\Gamma \cat \Gamma' \cat a: \chtype{U}; \Lambda'; \Sigma_1 \cat \Sigma_2 \proves V \hastype U
				\qquad
				\Lambda' \subseteq \Lambda
				\qquad
				\Sigma_1 \subseteq \Sigma\\
				b \in \tilde{n} \Leftrightarrow b: \chtype{U'} \in \Gamma \wedge
				s \in \tilde{n} \Leftrightarrow (s_i: S_i \in \Sigma_2 \wedge \dual{s_i}: S'_i \in \Sigma_3 \wedge S_i \dualof S'_i)
			\end{array}
		}{
			(\Gamma\cat a: \chtype{U}; \Lambda; \Sigma) \by{\news{\tilde{n}} \bactout{s}{V}} (\Gamma \cat \Gamma'\cat a: \chtype{U}; \Lambda\backslash\Lambda'; (\Sigma\backslash\Sigma_1) \cat \Sigma_3)			
		}
		\\[6mm]


%		\tree{
%			\dual{s} \notin \dom{\Sigma} \quad \Gamma; \Lambda'; \Sigma_1 \cup \Sigma_2 \ \proves V \hastype U \quad \Sigma_1 \subseteq \Sigma \quad \Lambda' \subseteq \Lambda
%			\quad n \in \tilde{n} \textrm{ iff } n : S_n \in \Sigma_2
%		}{
%			(\Gamma; \Lambda; \Sigma \cat s: \btout{U} S) \by{\news{\tilde{n}} \bactout{s}{V}} (\Gamma; \Lambda\backslash\Lambda'; \Sigma\backslash\Sigma_1 \cat s: S)
%		}
%		\quad
%		\tree{
%			\Gamma; \Lambda'; \Sigma' \proves V \hastype U \quad \Sigma' \subseteq \Sigma \quad \Lambda' \subseteq \Lambda
%		}{
%			(\Gamma \cat a: \chtype{U}; \Lambda; \Sigma) \by{\bactout{a}{V}} (\Gamma \cat a: \chtype{U}; \Lambda\backslash\Lambda'; \Sigma\backslash\Sigma')
%		}
%		\\[6mm]
%
%		\tree{
%			\begin{array}{c}
%				(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{\tilde{n}} \bactout{s}{V}} (\Gamma_2; \Lambda_2; \Sigma_2)\\
%				\Gamma_1; \Lambda_3; \Sigma_3 \cat s: S_1 \proves V \hastype U \quad S_1 \dualof S_2
%			\end{array}
%		}{
%			(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{s \cat \tilde{n}} \bactout{s}{V}} (\Gamma_2; \Lambda_2; \Sigma_2 \cat \dual{s}: S_2)
%		}
%		\qquad
%		\tree{
%			(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{\tilde{n}} \bactout{s}{V}} (\Gamma_2; \Lambda_2; \Sigma_2)
%		}{
%			(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{a \cat \tilde{n}} \bactout{s}{V}} (\Gamma_2 \cat a: \chtype{U}; \Lambda_2; \Sigma_2)
%		}
%		\\[6mm]

		\tree{
			\dual{s} \notin \dom{\Sigma} \quad \Gamma; \Lambda'; \Sigma' \proves V \hastype U \quad \Sigma' \cap \Sigma = \es \quad \Lambda' \cap \Lambda = \es
		}{
			(\Gamma; \Lambda; \Sigma \cat s: \btinp{U} S) \by{\bactinp{s}{V}} (\Gamma; \Lambda\cat\Lambda'; \Sigma\cat\Sigma' \cat s: S)
		}
		\quad
		\tree{
			\Gamma; \Lambda'; \Sigma' \proves V \hastype U \quad \Sigma' \cap \Sigma = \es \quad \Lambda' \cap \Lambda = \es
		}{
			(\Gamma \cat a: \chtype{U}; \Lambda; \Sigma) \by{\bactinp{a}{V}} (\Gamma \cat a: \chtype{U}; \Lambda\cat\Lambda'; \Sigma\cat\Sigma')
		}
		\\[6mm]

		\tree{
			\dual{s} \notin \dom{\Sigma} \quad k \in I
		}{
			(\Gamma; \Lambda; \Sigma \cat s: \btsel{l_i: S_i}_{i \in I}) \by{\bactsel{s}{l_k}} (\Gamma; \Lambda; \Sigma \cat s:S_k)
		}
		\qquad
		\tree{
			\dual{s} \notin \dom{\Sigma} \quad k \in I
		}{
			(\Gamma; \Lambda; \Sigma \cat s: \btbra{l_i: T_i}_{i \in I}) \by{\bactbra{s}{l_k}} (\Gamma; \Lambda; \Sigma \cat s:S_k)
		}
		\\[6mm]

		\tree{
			\Sigma_1 \red \Sigma_2
		}{
			(\Gamma; \Lambda; \Sigma_1) \by{\tau} (\Gamma; \Lambda; \Sigma_2)
		}



	\end{array}
	\]

	\[
	\begin{array}{c}
%		\tree{
%			(\Gamma; \Lambda; \Sigma \cat s: \btout{S'} S) \by{\bactout{s}{s'}} (\Gamma; \Lambda; \Sigma' \cat s: S)
%		}{
%			(\Gamma; \Lambda; \Sigma \cat s: \btout{S'} S) \hby{\bactout{s}{(z) \binp{z}{X} \appl{X}{s'}}} (\Gamma; \Lambda; \Sigma' \cat s: S)
%		}
%		\\[6mm]
%
%		\tree{
%			(\Gamma; \Lambda; \Sigma \cat s: \btout{U} S) \by{\bactout{s}{\abs{x}{P}}} (\Gamma; \Lambda; \Sigma' \cat s: S)
%		}{
%			(\Gamma; \Lambda; \Sigma \cat s: \btout{U} S) \hby{\bactout{s}{  (z) \binp{z}{X} \newsp{s'}{ \appl{X}{s'} \Par \bout{\dual{s'}}{\abs{x}{P}} \inact }}} (\Gamma; \Lambda; \Sigma' \cat s: S)
%		}
%		\\[6mm]
%
%
%		\tree{
%			(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{\tilde{n}} \bactout{s}{V}} (\Gamma_2; \Lambda_2; \Sigma_2)
%		}{
%			(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{s \cat \tilde{n}} \bactout{s}{V}} (\Gamma_2; \Lambda_2; \Sigma_2 \cat \dual{s}: S)
%		}
%		\qquad
%		\tree{
%			(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{\tilde{n}} \bactout{s}{V}} (\Gamma_2; \Lambda_2; \Sigma_2)
%		}{
%			(\Gamma_1; \Lambda_1; \Sigma_1) \by{\news{a \cat \tilde{n}} \bactout{s}{V}} (\Gamma_2 \cat a: \chtype{U}; \Lambda_2; \Sigma_2)
%		}
%		\\[6mm]


		\tree{
			\dual{s} \notin \dom{\Sigma} %\quad \Gamma; \Lambda'; \Sigma' \proves V \hastype U \quad \Sigma' \cap \Sigma = \es \quad \Lambda' \cup \Lambda = \es
		}{
			(\Gamma; \Lambda; \Sigma \cat s: \btinp{\lhot{S'}} S) \hby{\bactinp{s}{\abs{x}{\map{S'}^x}}} (\Gamma; \Lambda; \Sigma \cat s: S)
		}
		\quad
		\tree{
			%\Gamma; \Lambda'; \Sigma' \proves V \hastype U \quad \Sigma' \cap \Sigma = \es \quad \Lambda' \cup \Lambda = \es
		}{
			(\Gamma \cat a: \chtype{\lhot{S}}; \Lambda; \Sigma) \hby{\bactinp{a}{\abs{x}{\map{S}^x}}} (\Gamma \cat a: \chtype{\lhot{S}}; \Lambda; \Sigma)
		}
		\\[6mm]


		\tree{
			\dual{s} \notin \dom{\Sigma} %\quad \Gamma; \Lambda'; \Sigma' \proves V \hastype U \quad \Sigma' \cap \Sigma = \es \quad \Lambda' \cup \Lambda = \es
		}{
			(\Gamma; \Lambda; \Sigma \cat s: \btinp{\shot{S'}} S) \hby{\bactinp{s}{\abs{x}{\binp{a}{X} \appl{X}{x}}}} (\Gamma \cat a: \chtype{\lhot{S'}}; \Lambda; \Sigma \cat s: S)
		}
		\\[6mm]
		\tree{
			%\Gamma; \Lambda'; \Sigma' \proves V \hastype U \quad \Sigma' \cap \Sigma = \es \quad \Lambda' \cup \Lambda = \es
		}{
			(\Gamma \cat a: \chtype{\shot{S}}; \Lambda; \Sigma) \hby{\bactinp{a}{\abs{x}{\binp{b}{X} \appl{X}{x}}}} (\Gamma \cat a: \chtype{\shot{S}} \cat b: \chtype{\lhot{S}}; \Lambda; \Sigma)
		}
		\\[6mm]



%		\tree{
%			\dual{s} \notin \dom{\Sigma} \quad \Gamma; \es; \Sigma' \proves n \hastype U
%		}{
%			(\Gamma; \Lambda; \Sigma \cat s: \btinp{U} S) \by{\bactinp{s}{n}} (\Gamma; \Lambda; \Sigma \cup \Sigma' \cat s: S)
%		}
%		\\[6mm]
%
%		\tree{
%			\dual{s} \notin \dom{\Sigma}
%		}{
%			(\Gamma; \Lambda; \Sigma \cat s: \btinp{\shot{S'}} S) \by{\news{a} \bactinp{s}{\abs{x} \binp{a}{Y} \appl{Y}{x}}} (\Gamma \cat a: \chtype{\lhot{S'}}; \Lambda; \Sigma \cat s: S)
%		}
%		\\[6mm]


%		\tree{
%			\Gamma; \Lambda'; \Sigma' \proves V \hastype U
%		}{
%			(\Gamma \cat a : \chtype{U}; \Lambda; \Sigma) \by{\bactinp{a}{U}} (\Gamma \cat a: \chtype{U}; \Lambda \cup \Lambda'; \Sigma \cup \Sigma')
%		}
%		\\[6mm]

%		\tree{
%			\dual{s} \notin \dom{\Sigma} \quad k \in I
%		}{
%			(\Gamma; \Lambda; \Sigma \cat s: \btsel{l_i: S_i}_{i \in I}) \by{\bactsel{s}{l_k}} (\Gamma; \Lambda; \Sigma \cat s:S_k)
%		}
%		\qquad
%		\tree{
%			\dual{s} \notin \dom{\Sigma} \quad k \in I
%		}{
%			(\Gamma; \Lambda; \Sigma \cat s: \btbra{l_i: T_i}_{i \in I}) \by{\bactbra{s}{l_k}} (\Gamma; \Lambda; \Sigma \cat s:S_k)
%		}
%		\\[6mm]
%
%		\tree{
%			(\Gamma; \Lambda_1; \Sigma_1) \by{\news{\tilde{s}} \bactout{s}{V}} (\Gamma; \Lambda_2; \Sigma_2)
%		}{
%			(\Gamma; \Lambda_1; \Sigma_1) \by{\news{s' \cat \tilde{s'}} \bactout{s}{V}} (\Gamma; \Lambda_2; \Sigma_2 \cat \dual{s'}: S)
%		}
%		\qquad
%		\tree{
%			\Sigma_1 \red \Sigma_2
%		}{
%			(\Gamma; \Lambda; \Sigma_1) \by{\tau} (\Gamma; \Lambda; \Sigma_2)
%		}
	\end{array}
	\]
	\caption{Labelled Transition Semantics for Typed Enviroments \label{fig:envLTS}}
\end{figure}
